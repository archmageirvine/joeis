package irvine.oeis.a054;

import irvine.math.z.Z;
import irvine.oeis.triangle.Triangle;

/**
 * A054090 Triangular array generated by its row sums: T(n,0) = 1 for n &gt;= 0, T(n,1) = r(n-1), T(n,k) = T(n,k-1) - (-1)^k * r(n-k) for k = 2, 3, ..., n, n &gt;= 2, r(h) = sum of the numbers in row h of T.
 * @author Georg Fischer
 */
public class A054090 extends Triangle {

  private Z mTerm;

  @Override
  protected Z compute(final int n, final int k) {
    if (k == 0) {
      mTerm = Z.ONE;
    } else if (k == 1) {
      Z sum = Z.ZERO;
      for (int j = 0; j < n; ++j) {
        sum = sum.add(get(n - 1, j));
      }
      mTerm = sum;
    } else {
      mTerm = mTerm.add(get(n - k + 1, 1).multiply((((k + 1) & 1) == 0) ? 1 : -1));
    }
    return mTerm;
  }
}
