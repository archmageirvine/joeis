package irvine.oeis.a182;
// Generated by gen_seq4.pl egfsi at 2021-12-02 19:59

import irvine.math.group.PolynomialRingField;
import irvine.math.polynomial.Polynomial;
import irvine.math.q.Q;
import irvine.math.q.RationalUnityExtension;
import irvine.math.z.Z;
import irvine.oeis.Sequence;

/**
 * A182825 E.g.f. 1/(cos(sqrt(3)*x) - sin(sqrt(3)*x)/sqrt(3)).
 * @author Georg Fischer
 * @author Sean A. Irvine
 */
public class A182825 implements Sequence {

  // Construct field like Q[sqrt(3)]; i.e., extension of rationals such that t^2=3
  private static final RationalUnityExtension Q3 = new RationalUnityExtension("t", 2, Q.THREE);
  // Then make polynomials over Q3 field
  private static final PolynomialRingField<Polynomial<Q>> RING = new PolynomialRingField<>(Q3);
  private static final Polynomial<Q> SQRT3 = Q3.x();
  private int mN = -1;
  private Z mF = Z.ONE;

  @Override
  public Z next() {
    if (++mN != 0) {
      mF = mF.multiply(mN);
    }
    final Polynomial<Polynomial<Q>> cos = RING.cos(RING.monomial(SQRT3, 1), mN);
    final Polynomial<Polynomial<Q>> sin = RING.divide(RING.sin(RING.monomial(SQRT3, 1), mN), SQRT3);
    final Polynomial<Polynomial<Q>> series = RING.series(RING.one(), RING.subtract(cos, sin), mN);
    //System.out.println("series=" + series);
    return series.coeff(mN).coeff(0).multiply(mF).toZ();
  }
}
