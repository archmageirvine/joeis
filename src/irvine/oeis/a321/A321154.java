package irvine.oeis.a321;
// Generated by gen_seq4.pl 2024-04-25/lambdir at 2024-04-25 23:20

import irvine.math.IntegerUtils;
import irvine.math.z.Z;
import irvine.oeis.DirectSequence;
import irvine.oeis.LambdaSequence;
import irvine.oeis.a002.A002487;

/**
 * A321154 a(n) = s(n)*r - s(2^r + n), where s(n) = A002487(n) starting at n = 0 and r = 1 + floor(log_2(n)).
 * @author Georg Fischer
 */
public class A321154 extends LambdaSequence {

  private static final DirectSequence SEQ = new A002487();

  /** Construct the sequence. */
  public A321154() {
    super(0, n -> {
      final int r = IntegerUtils.floorLog2(n) + 1;
      return SEQ.a(n).multiply(r).subtract(SEQ.a(Z.TWO.pow(r).add(n)));
    });
  }
}
